# 新功能优化任务

**创建时间**: 2025-10-20
**状态**: 进行中

---

## 任务列表

### 1. 邮件模板变量获取机制说明

**当前实现**:
- 使用 Handlebars 模板引擎处理变量
- 变量通过 `variables` 字段定义（JSON格式，包含变量说明）
- 渲染时通过 `renderTemplate` 方法传入实际值

**问题**: 需要明确变量来源和使用方式

### 2. 接口监控弹窗分页支持

**文件**: `frontend/app/(authenticated)/monitor/apis/page.js`

**当前问题**:
- 日志弹窗目前固定显示50条记录（第233行）
- 定时任务数据量大时加载慢且不便查看

**需求**:
- 添加分页功能
- 默认每页显示100条记录
- 支持翻页查看历史数据

**修改位置**:
- 第233行: `apiMonitorApi.getMonitorLogs(monitor.id, { limit: 50 })`
- 第616-651行: 日志列表表格

### 3. 接口监控日期展示优化

**文件**: `frontend/app/(authenticated)/monitor/apis/page.js`

**当前问题**:
- 日期格式可能显示不正确或不够友好

**修改位置**:
- 第347行: 最近检测时间
- 第638行: 日志时间展示

---

## 实施计划

### Todo清单

- [ ] 1. 邮件模板变量机制
  - [ ] 1.1 分析当前变量定义和使用方式
  - [ ] 1.2 编写文档说明变量来源
  - [ ] 1.3 提供示例

- [ ] 2. 接口监控日志分页
  - [ ] 2.1 修改日志查询接口调用，添加page参数
  - [ ] 2.2 添加分页状态管理
  - [ ] 2.3 在弹窗底部添加分页组件
  - [ ] 2.4 默认limit改为100

- [ ] 3. 日期展示优化
  - [ ] 3.1 检查日期数据格式
  - [ ] 3.2 优化日期格式化函数
  - [ ] 3.3 确保时区正确显示
