const express = require('express');
const router = express.Router();
const {{dashToCamel modulePath}}Controller = require('./{{modulePath}}.controller');
const { authenticate } = require('../../middlewares/auth');
const { checkPermission } = require('../../middlewares/permission');

// 所有路由都需要认证
router.use(authenticate);

/**
 * @route   GET /api/{{modulePath}}
 * @desc    获取{{description}}列表
 * @access  Private
 */
router.get(
  '/',
  checkPermission('{{permissionPrefix}}:read'),
  {{dashToCamel modulePath}}Controller.get{{moduleName}}s
);

/**
 * @route   GET /api/{{modulePath}}/:id
 * @desc    获取{{description}}详情
 * @access  Private
 */
router.get(
  '/:id',
  checkPermission('{{permissionPrefix}}:read'),
  {{dashToCamel modulePath}}Controller.get{{moduleName}}ById
);

{{#if enableCreate}}
/**
 * @route   POST /api/{{modulePath}}
 * @desc    创建{{description}}
 * @access  Private
 */
router.post(
  '/',
  checkPermission('{{permissionPrefix}}:create'),
  {{dashToCamel modulePath}}Controller.create{{moduleName}}
);
{{/if}}

{{#if enableUpdate}}
/**
 * @route   PUT /api/{{modulePath}}/:id
 * @desc    更新{{description}}
 * @access  Private
 */
router.put(
  '/:id',
  checkPermission('{{permissionPrefix}}:update'),
  {{dashToCamel modulePath}}Controller.update{{moduleName}}
);
{{/if}}

{{#if enableDelete}}
/**
 * @route   DELETE /api/{{modulePath}}/:id
 * @desc    删除{{description}}
 * @access  Private
 */
router.delete(
  '/:id',
  checkPermission('{{permissionPrefix}}:delete'),
  {{dashToCamel modulePath}}Controller.delete{{moduleName}}
);
{{/if}}

{{#if enableBatchDelete}}
/**
 * @route   DELETE /api/{{modulePath}}/batch
 * @desc    批量删除{{description}}
 * @access  Private
 */
router.delete(
  '/batch',
  checkPermission('{{permissionPrefix}}:delete'),
  {{dashToCamel modulePath}}Controller.batchDelete{{moduleName}}s
);
{{/if}}

{{#if enableExport}}
/**
 * @route   GET /api/{{modulePath}}/export
 * @desc    导出{{description}}数据
 * @access  Private
 */
router.get(
  '/export',
  checkPermission('{{permissionPrefix}}:read'),
  {{dashToCamel modulePath}}Controller.export{{moduleName}}s
);
{{/if}}

module.exports = router;
