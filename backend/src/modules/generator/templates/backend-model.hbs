module.exports = (sequelize, DataTypes) => {
  const {{moduleName}} = sequelize.define('{{moduleName}}', {
    {{#each fields}}
    {{this.name}}: {
      type: DataTypes.{{toSequelizeType this.type}},
      {{#if this.isPrimary}}
      primaryKey: true,
      {{#if (eq this.type 'UUID')}}
      defaultValue: DataTypes.UUIDV4,
      {{/if}}
      {{/if}}
      {{#unless this.nullable}}
      allowNull: false,
      {{/unless}}
      {{#if this.defaultValue}}
      defaultValue: {{#if (isString this.defaultValue)}}'{{this.defaultValue}}'{{else}}{{this.defaultValue}}{{/if}},
      {{/if}}
      {{#if this.comment}}
      comment: '{{this.comment}}',
      {{/if}}
    },
    {{/each}}
  }, {
    tableName: '{{tableName}}',
    timestamps: true,
    underscored: true,
    {{#if description}}
    comment: '{{description}}',
    {{/if}}
  });

  return {{moduleName}};
};
