# åç«¯é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´çš„ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.js             # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ logger.js               # æ—¥å¿—é…ç½®
â”‚   â”œâ”€â”€ redis.js                # Redisé…ç½®
â”‚   â””â”€â”€ minio.js                # Minioå¯¹è±¡å­˜å‚¨é…ç½®
â”‚
â”œâ”€â”€ models/                      # æ•°æ®åº“æ¨¡å‹ï¼ˆæŒ‰ç±»å‹åˆ†ç±»ï¼‰
â”‚   â”œâ”€â”€ system/                 # ç³»ç»Ÿæ¨¡å‹ï¼ˆ11ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”œâ”€â”€ Role.js
â”‚   â”‚   â”œâ”€â”€ Permission.js
â”‚   â”‚   â”œâ”€â”€ Menu.js
â”‚   â”‚   â”œâ”€â”€ Department.js
â”‚   â”‚   â”œâ”€â”€ Folder.js
â”‚   â”‚   â”œâ”€â”€ File.js
â”‚   â”‚   â”œâ”€â”€ FileShare.js
â”‚   â”‚   â”œâ”€â”€ FilePermission.js
â”‚   â”‚   â”œâ”€â”€ Attachment.js
â”‚   â”‚   â””â”€â”€ Dictionary.js
â”‚   â”‚
â”‚   â”œâ”€â”€ monitor/                # ç›‘æ§æ¨¡å‹ï¼ˆ5ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ MonitorMetric.js
â”‚   â”‚   â”œâ”€â”€ ApiMonitor.js
â”‚   â”‚   â”œâ”€â”€ ApiMonitorLog.js
â”‚   â”‚   â”œâ”€â”€ AlertRule.js
â”‚   â”‚   â””â”€â”€ AlertHistory.js
â”‚   â”‚
â”‚   â”œâ”€â”€ notification/           # é€šçŸ¥æ¨¡å‹ï¼ˆ4ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ Notification.js
â”‚   â”‚   â”œâ”€â”€ EmailLog.js
â”‚   â”‚   â”œâ”€â”€ NotificationSettings.js
â”‚   â”‚   â””â”€â”€ EmailTemplate.js
â”‚   â”‚
â”‚   â”œâ”€â”€ generator/              # ç”Ÿæˆå™¨æ¨¡å‹ï¼ˆ3ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ GeneratedModule.js
â”‚   â”‚   â”œâ”€â”€ GeneratedField.js
â”‚   â”‚   â””â”€â”€ GenerationHistory.js
â”‚   â”‚
â”‚   â”œâ”€â”€ association/            # å…³è”è¡¨ï¼ˆä¸­é—´è¡¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ UserRole.js
â”‚   â”‚   â”œâ”€â”€ RolePermission.js
â”‚   â”‚   â””â”€â”€ RoleMenu.js
â”‚   â”‚
â”‚   â”œâ”€â”€ index.js                # æ¨¡å‹æ±‡èšå…¥å£
â”‚   â””â”€â”€ MODELS_STRUCTURE.md     # æ¨¡å‹ç»“æ„è¯´æ˜
â”‚
â”œâ”€â”€ modules/                     # ä¸šåŠ¡æ¨¡å—ï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ [System Modules] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   â”‚   # æ ¸å¿ƒç³»ç»ŸåŠŸèƒ½ï¼ˆä¸åŒ…å«ä¸šåŠ¡ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ auth/                   # è®¤è¯æˆæƒ
â”‚   â”‚   â”œâ”€â”€ auth.controller.js
â”‚   â”‚   â”œâ”€â”€ auth.service.js
â”‚   â”‚   â”œâ”€â”€ auth.routes.js
â”‚   â”‚   â”œâ”€â”€ auth.middleware.js
â”‚   â”‚   â””â”€â”€ auth.validation.js
â”‚   â”‚
â”‚   â”œâ”€â”€ user/                   # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ user.controller.js
â”‚   â”‚   â”œâ”€â”€ user.service.js
â”‚   â”‚   â”œâ”€â”€ user.routes.js
â”‚   â”‚   â””â”€â”€ user.validation.js
â”‚   â”‚
â”‚   â”œâ”€â”€ role/                   # è§’è‰²ç®¡ç†
â”‚   â”œâ”€â”€ permission/             # æƒé™ç®¡ç†
â”‚   â”œâ”€â”€ menu/                   # èœå•ç®¡ç†
â”‚   â”œâ”€â”€ captcha/                # éªŒè¯ç 
â”‚   â”œâ”€â”€ department/             # éƒ¨é—¨ç®¡ç†
â”‚   â”œâ”€â”€ file/                   # æ–‡ä»¶ç®¡ç†
â”‚   â”œâ”€â”€ folder/                 # æ–‡ä»¶å¤¹ç®¡ç†
â”‚   â”œâ”€â”€ file-share/             # æ–‡ä»¶åˆ†äº«
â”‚   â”œâ”€â”€ dictionary/             # æ•°æ®å­—å…¸
â”‚   â”œâ”€â”€ log/                    # æ“ä½œæ—¥å¿—
â”‚   â”œâ”€â”€ api-interface/          # APIæ¥å£ç®¡ç†
â”‚   â”œâ”€â”€ datasource/             # æ•°æ®æºç®¡ç†
â”‚   â””â”€â”€ page-config/            # é¡µé¢é…ç½®
â”‚
â”‚   â”‚
â”‚   â”œâ”€â”€ [Business Modules] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   â”‚   # åŸºäºå¹³å°æ„å»ºçš„ä¸šåŠ¡åŠŸèƒ½
â”‚   â”‚
â”‚   â””â”€â”€ business/               # ä¸šåŠ¡æ¨¡å—ä¸“ç”¨æ–‡ä»¶å¤¹
â”‚       â”œâ”€â”€ TEMPLATE.md         # ä¸šåŠ¡æ¨¡å—åˆ›å»ºæ¨¡æ¿
â”‚       â”œâ”€â”€ README.md           # ä¸šåŠ¡æ¨¡å—è¯´æ˜
â”‚       â””â”€â”€ .gitkeep            # ä¿ç•™ç©ºæ–‡ä»¶å¤¹
â”‚
â”‚   â”œâ”€â”€ ARCHITECTURE.md         # åç«¯æ¶æ„è®¾è®¡è¯´æ˜
â”‚
â”œâ”€â”€ middlewares/                # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.middleware.js      # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ validate.js             # æ•°æ®éªŒè¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ error.js                # é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”‚   â””â”€â”€ requestLogger.js        # è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶
â”‚
â”œâ”€â”€ utils/                      # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ response.js             # ç»Ÿä¸€å“åº”æ ¼å¼
â”‚   â”œâ”€â”€ ApiError.js             # è‡ªå®šä¹‰é”™è¯¯ç±»
â”‚   â”œâ”€â”€ file-utils.js           # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â””â”€â”€ encryption.js           # åŠ å¯†å·¥å…·
â”‚
â”œâ”€â”€ routes/                     # è·¯ç”±ç®¡ç†
â”‚   â”œâ”€â”€ index.js                # è·¯ç”±æ±‡èšå…¥å£
â”‚   â””â”€â”€ dynamic-routes.js       # åŠ¨æ€è·¯ç”±ï¼ˆä»£ç ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ migrations/                 # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ 20251117000000-...js
â”‚   â”œâ”€â”€ 20251118000000-...js
â”‚   â””â”€â”€ README-dynamic-sql.md
â”‚
â”œâ”€â”€ sql/                        # åˆå§‹åŒ–SQLè„šæœ¬
â”‚   â”œâ”€â”€ schema-complete.sql     # å®Œæ•´æ•°æ®åº“æ¶æ„
â”‚   â”œâ”€â”€ init-data.sql           # åˆå§‹æ•°æ®
â”‚   â””â”€â”€ lowcode-platform-schema.sql
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£
â”‚   â””â”€â”€ api-response-format.md  # APIå“åº”æ ¼å¼è§„èŒƒ
â”‚
â”œâ”€â”€ app.js                      # Expressåº”ç”¨é…ç½®
â”œâ”€â”€ server.js                   # æœåŠ¡å™¨å¯åŠ¨å…¥å£
â”‚
â””â”€â”€ PROJECT_STRUCTURE.md        # æœ¬æ–‡æ¡£
```

## ğŸ¯ æ¨¡å—åˆ†ç±»è¯´æ˜

### System Modulesï¼ˆç³»ç»Ÿæ¨¡å—ï¼‰

è¿™äº›æ¨¡å—æ˜¯ Owl ç®¡ç†å¹³å°çš„æ ¸å¿ƒæ¡†æ¶åŠŸèƒ½ï¼Œä»»ä½•ä¸šåŠ¡éƒ½å¯èƒ½ä¾èµ–è¿™äº›æ¨¡å—ã€‚

| æ¨¡å— | è¯´æ˜ | å…³é”®åŠŸèƒ½ |
|------|------|---------|
| **auth** | è®¤è¯æˆæƒ | ç™»å½•ã€æ³¨å†Œã€JWTç®¡ç†ã€æƒé™æ ¡éªŒ |
| **user** | ç”¨æˆ·ç®¡ç† | ç”¨æˆ·CRUDã€å¯†ç ç®¡ç†ã€ç”¨æˆ·æŸ¥è¯¢ |
| **role** | è§’è‰²ç®¡ç† | è§’è‰²CRUDã€è§’è‰²æƒé™å…³è” |
| **permission** | æƒé™ç®¡ç† | æƒé™å®šä¹‰ã€æƒé™æ£€æŸ¥ |
| **menu** | èœå•ç®¡ç† | èœå•æ ‘ã€ç”¨æˆ·èœå•ã€æƒé™ç»‘å®š |
| **captcha** | éªŒè¯ç  | å›¾å½¢éªŒè¯ç ç”Ÿæˆå’ŒéªŒè¯ |
| **department** | éƒ¨é—¨ç®¡ç† | éƒ¨é—¨æ ‘ã€æˆå‘˜ç®¡ç† |
| **file** | æ–‡ä»¶ç®¡ç† | æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€ç‰ˆæœ¬ç®¡ç†ã€æƒé™æ§åˆ¶ |
| **folder** | æ–‡ä»¶å¤¹ç®¡ç† | æ–‡ä»¶å¤¹æ ‘ã€å†…å®¹ç®¡ç† |
| **file-share** | æ–‡ä»¶åˆ†äº« | åˆ†äº«é“¾æ¥ã€åˆ†äº«æƒé™ |
| **dictionary** | æ•°æ®å­—å…¸ | ç³»ç»Ÿæšä¸¾å€¼ã€å­—å…¸ç®¡ç† |
| **log** | æ“ä½œæ—¥å¿— | å®¡è®¡æ—¥å¿—ã€æ“ä½œè¿½è¸ª |
| **api-interface** | APIæ¥å£ | è‡ªå®šä¹‰APIç«¯ç‚¹ç®¡ç† |
| **datasource** | æ•°æ®æº | æ•°æ®åº“è¿æ¥ã€æ•°æ®æºç®¡ç† |
| **page-config** | é¡µé¢é…ç½® | é¡µé¢å¸ƒå±€ã€ç»„ä»¶é…ç½® |

### Business Modulesï¼ˆä¸šåŠ¡æ¨¡å—ï¼‰

åŸºäº Owl å¹³å°æ„å»ºçš„å…·ä½“ä¸šåŠ¡åŠŸèƒ½ã€‚åç»­æ–°å¢çš„ä¸šåŠ¡åº”æ”¾åœ¨ `modules/business/` æ–‡ä»¶å¤¹ä¸­ã€‚

å½“å‰ä¸šåŠ¡æ¨¡å—ï¼šæš‚æ— ï¼ˆå¾…æ‰©å±•ï¼‰

**åˆ›å»ºæ–°ä¸šåŠ¡æ¨¡å—**ï¼Œå‚è€ƒï¼š
- `modules/business/TEMPLATE.md` - å®Œæ•´çš„æ¨¡æ¿å’Œä»£ç ç¤ºä¾‹
- `modules/business/README.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“Š æ–‡ä»¶åˆ†å¸ƒç»Ÿè®¡

| ç±»åˆ« | æ•°é‡ | ä½ç½® |
|------|------|------|
| **æ•°æ®æ¨¡å‹** | 27ä¸ª | `models/` |
| **ç³»ç»Ÿæ¨¡å—** | 15ä¸ª | `modules/` (æ ¹ç›®å½•) |
| **ä¸šåŠ¡æ¨¡å—** | 0ä¸ª | `modules/business/` |
| **ä¸­é—´ä»¶** | 4ä¸ª | `middlewares/` |
| **å·¥å…·å‡½æ•°** | ~10ä¸ª | `utils/` |
| **è·¯ç”±** | 15+ä¸ª | `routes/` |

## ğŸ”„ æ•°æ®æµå‘

```
User Request
    â†“
Routes (routes/index.js) - è·¯ç”±åˆ†å‘
    â†“
Middleware (middleware/) - è®¤è¯ã€éªŒè¯ã€æ—¥å¿—
    â†“
Controller - HTTPè¯·æ±‚å¤„ç†ã€å‚æ•°éªŒè¯è°ƒç”¨
    â†“
Service - ä¸šåŠ¡é€»è¾‘å®ç°
    â†“
Model (models/) - æ•°æ®åº“æ“ä½œ
    â†“
Database - æ•°æ®æŒä¹…åŒ–
    â†“
Response (utils/response.js) - ç»Ÿä¸€å“åº”æ ¼å¼
    â†“
User Response
```

## ğŸ“ æœ€ä½³å®è·µ

### 1. æ¨¡å—å¼€å‘è§„èŒƒ

æ¯ä¸ªç³»ç»Ÿæ¨¡å—åº”éµå¾ª Controller-Service æ¨¡å¼ï¼š

```
[module]/
â”œâ”€â”€ [module].controller.js    # HTTPè¯·æ±‚å¤„ç†
â”œâ”€â”€ [module].service.js       # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ [module].routes.js        # è·¯ç”±å®šä¹‰
â”œâ”€â”€ [module].validation.js    # æ•°æ®éªŒè¯
â”œâ”€â”€ [module].model.js         # æ¨¡å‹ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ [module].middleware.js    # ä¸­é—´ä»¶ï¼ˆå¯é€‰ï¼‰
```

### 2. å‘½åè§„èŒƒ

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|------|------|------|
| æ–‡ä»¶å | kebab-case | `user-profile.service.js` |
| ç±»å | PascalCase | `UserProfileService` |
| æ–¹æ³•å | camelCase | `getUserProfile()` |
| å¸¸é‡ | UPPER_SNAKE_CASE | `MAX_FILE_SIZE` |

### 3. å¯¼å…¥æ¨¡å‹

```javascript
// âœ… æ¨è
const { User, Role } = require('../../models');

// âŒ é¿å…
const User = require('../../models/system/User');
```

### 4. é”™è¯¯å¤„ç†

```javascript
const { ApiError } = require('../../utils/ApiError');

throw new ApiError(400, 'Error message');
```

### 5. ç»Ÿä¸€å“åº”æ ¼å¼

```javascript
const { success, error } = require('../../utils/response');

success(res, data, 'message');
error(res, errorObject);
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ·»åŠ æ–°ç³»ç»Ÿæ¨¡å—
1. åœ¨ `modules/` åˆ›å»ºæ–°æ–‡ä»¶å¤¹
2. æŒ‰è§„èŒƒåˆ›å»º controller, service, routes, validation
3. åœ¨ `routes/index.js` æ³¨å†Œè·¯ç”±

### æ·»åŠ æ–°ä¸šåŠ¡æ¨¡å—
1. åœ¨ `modules/business/` åˆ›å»ºæ–°æ–‡ä»¶å¤¹
2. å‚è€ƒ `TEMPLATE.md` åˆ›å»ºæ¨¡å—æ–‡ä»¶
3. åœ¨ `routes/index.js` æ³¨å†Œè·¯ç”±

### æ·»åŠ æ–°æ•°æ®æ¨¡å‹
1. åœ¨ `models/[category]/` åˆ›å»ºæ¨¡å‹æ–‡ä»¶
2. åœ¨ `models/index.js` æ³¨å†Œæ¨¡å‹
3. åˆ›å»ºæ•°æ®åº“è¿ç§»ï¼ˆå¯é€‰ï¼‰

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **æ¶æ„è®¾è®¡**ï¼š`modules/ARCHITECTURE.md`
- **æ¨¡å‹è¯´æ˜**ï¼š`models/MODELS_STRUCTURE.md`
- **ä¸šåŠ¡æ¨¡å—æ¨¡æ¿**ï¼š`modules/business/TEMPLATE.md`
- **ä¸šåŠ¡æ¨¡å—æŒ‡å—**ï¼š`modules/business/README.md`
- **APIå“åº”æ ¼å¼**ï¼š`docs/api-response-format.md`

## ğŸ“ å¸¸è§é—®é¢˜

**Q: ç³»ç»Ÿæ¨¡å—å’Œä¸šåŠ¡æ¨¡å—æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**
A: ç³»ç»Ÿæ¨¡å—æ˜¯å¹³å°æ¡†æ¶ä»£ç ï¼Œä»»ä½•ä¸šåŠ¡éƒ½å¯èƒ½ä¾èµ–ï¼›ä¸šåŠ¡æ¨¡å—æ˜¯ç‰¹å®šä¸šåŠ¡åŠŸèƒ½ï¼Œç›¸å¯¹ç‹¬ç«‹ã€‚

**Q: æ–°å¢æ¨¡å—åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ**
A: å¦‚æœæ˜¯ç³»ç»ŸåŠŸèƒ½ï¼Œæ”¾åœ¨ `modules/` æ ¹ç›®å½•ï¼›å¦‚æœæ˜¯ä¸šåŠ¡åŠŸèƒ½ï¼Œæ”¾åœ¨ `modules/business/`ã€‚

**Q: å¦‚ä½•ç»„ç»‡å¤æ‚çš„ä¸šåŠ¡æ¨¡å—ï¼Ÿ**
A: å‚è€ƒ `modules/business/TEMPLATE.md` ä¸­çš„åˆ†å±‚ç»“æ„è¯´æ˜ã€‚

---

**Happy Coding! ğŸ‰**

